version: '3.8'

services:
  youtube-resolver:
    build: .
    container_name: youtube-resolver
    restart: unless-stopped
    env_file:
      - ./.env
    environment:
      - NODE_ENV=production
    # Run container with host-mapped UID/GID to ensure write access on bind mounts
    user: "${PUID:-1001}:${PGID:-1001}"
    ports:
      - "3001:3001"
    volumes:
      # Mount cookies directory as writable persistent store for yt-dlp
      - ./cookies:/data/cookies
      - ./logs:/app/logs
